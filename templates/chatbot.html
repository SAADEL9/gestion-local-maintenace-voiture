{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
    body {
        background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1613214150384-24f6976d626d?q=80&w=2070&auto=format&fit=crop');
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        min-height: 100vh;
    }

    .chat-container {
        max-width: 1000px;
        margin: 40px auto;
        padding: 20px;
    }

    .chat-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px;
        color: white;
    }
    
    .chat-header h2 {
        font-size: 2.5rem;
        margin-bottom: 15px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }
    
    .chat-header p {
        font-size: 1.2rem;
        opacity: 0.9;
        text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
    }

    df-messenger {
        --df-messenger-bot-message: #007bff;
        --df-messenger-button-titlebar-color: #007bff;
        --df-messenger-chat-background-color: rgba(255, 255, 255, 0.95);
        --df-messenger-font-color: #333;
        --df-messenger-send-icon: #007bff;
        --df-messenger-user-message: #e3f2fd;
        width: 100% !important;
        height: 600px !important;
        margin: 0 auto;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
</style>

<div class="chat-container">
    <div class="chat-header">
        <h2>Assistant Virtuel Garage Auto</h2>
        <p>Notre assistant virtuel est là pour répondre à vos questions 24/7</p>
    </div>
    <div class="chat-content">
        <!-- Dialogflow Messenger -->
       <script src="https://www.gstatic.com/dialogflow-console/fast/messenger/bootstrap.js?v=1"></script>
<df-messenger
  intent="WELCOME"
  chat-title="Garage Assistant"
  agent-id="e8b61dfa-bee4-4982-ae20-454c3f754bc9"
  language-code="fr"
></df-messenger>
    </div>
</div>

<script>
    // Wait for the messenger to load
    window.addEventListener('dfMessengerLoaded', function (event) {
        // Get the messenger element
        const dfMessenger = document.querySelector('df-messenger');
        
        // Configure messenger
        dfMessenger.setAttribute('expand', 'true');
    });
</script>
{% endblock %}
